(function(e){function t(t){for(var l,n,o=t[0],i=t[1],c=t[2],p=0,d=[];p<o.length;p++)n=o[p],s[n]&&d.push(s[n][0]),s[n]=0;for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],l=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(l=!1)}l&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var l={},s={app:0},r=[];function n(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=l,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var l=a("64a9"),s=a.n(l);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d");var l=a("2b0e"),s=a("5c96"),r=a.n(s),n=(a("0fae"),a("c3da")),o=a.n(n),i=a("e8cc"),c=a.n(i),u=(a("b11c"),a("95a8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",{staticStyle:{"min-height":"80px",height:"5vh"}},[a("h1",{staticStyle:{"text-align":"center"}},[e._v("minium 测试报告")])]),a("el-container",{staticStyle:{height:"80vh"}},[e.taskMenuShow?a("el-aside",{staticStyle:{"min-width":"400px","background-color":"rgb(238, 241, 246)"}},[a("el-menu",{staticStyle:{"min-height":"80vh"},attrs:{"default-active":e.defaultOpeneds[1],"default-openeds":e.defaultOpeneds,"unique-opened":!0},on:{select:e.handleSelect,open:e.handleOpen,close:e.handleClose}},e._l(e.taskDatas,function(t,l){return a("el-submenu",{attrs:{index:l+""}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.summary.start_time))])]),e._l(t.case_datas,function(t,s){return a("el-menu-item",{attrs:{index:l+"-"+s}},[a("el-row",{attrs:{gutter:10,type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"word-wrap":"break-word","word-break":"break-all",overflow:"auto"},attrs:{span:18}},[e._v(e._s(t.case_name))]),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:e.statusClass(t),effect:"dark"}},[e._v(e._s(e.statusMsg(t)))])],1)],1)],1)})],2)}),1)],1):e._e(),a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("el-container",[a("el-main",[a("Summary",{attrs:{summary:e.summary}})],1)],1),a("el-container",[e.taskMenuShow?e._e():a("el-aside",{attrs:{width:"500px"}},[a("el-col",[a("el-row",{staticStyle:{"padding-top":"2em"}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.caseDatas,"highlight-current-row":""},on:{"row-click":e.tableRowClick}},[a("el-table-column",{attrs:{prop:"run_time",label:"执行时间",width:"180"}}),a("el-table-column",{attrs:{prop:"case_name",label:"用例名称",width:"180"}}),a("el-table-column",{attrs:{prop:"case_name",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.statusClass(t.row),effect:"dark"}},[e._v(e._s(e.statusMsg(t.row)))])]}}],null,!1,1249338146)})],1)],1)],1)],1),a("el-main",[e.caseDetail?a("CaseDetail",{attrs:{caseDetail:e.caseDetail}}):e._e()],1)],1)],1)],1)],1),a("el-footer",{staticStyle:{"text-align":"center",height:"15vh","font-size":"12px",color:"#aaa"}},[a("p",[e._v("Minium Designed by 微信测试中心")]),a("p",[e._v("Copyright © 1998-2019 Tencent Inc. All Rights Reserved")])])],1),a("el-backtop",[a("div",{staticStyle:{"{\n      height":"100%",width:"100%","background-color":"#f2f5f6","box-shadow":"0 0 6px rgba(0,0,0, .12)","text-align":"center","line-height":"40px",color:"#1989fa"}},[e._v("\n    Top\n  ")])])],1)}),p=[],d=(a("28a5"),a("768b")),f=(a("ac4d"),a("8a81"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"case-detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.caseDetail.device.system_info],stripe:"",border:""}},[a("el-table-column",{attrs:{label:"执行环境",align:"center"}},[a("el-table-column",{attrs:{prop:"model",label:"设备"}}),a("el-table-column",{attrs:{prop:"platform",label:"平台"}}),a("el-table-column",{attrs:{prop:"system",label:"系统"}}),a("el-table-column",{attrs:{prop:"SDKVersion",label:"基础库"}})],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.caseDetail],stripe:"",border:""}},[a("el-table-column",{attrs:{label:"运行信息",align:"center"}},[a("el-table-column",{attrs:{prop:"module",label:"名称"}}),a("el-table-column",{attrs:{prop:"case_name",label:"包名"}}),a("el-table-column",{attrs:{prop:"costs",label:"耗时"}}),a("el-table-column",{attrs:{label:"结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.statusMsg(t.row))+"\n              ")]}}])})],1)],1)],1)],1),a("el-col",{staticStyle:{"margin-left":"1em"},attrs:{span:10}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用例说明")])]),a("pre",[e._v(e._s(e.caseDetail.case_doc))])])],1)],1),a("el-collapse",{attrs:{value:["performance"]}},[a("el-collapse-item",{attrs:{title:"运行截图",name:"capture"}},[e.caseDetail.screen_info&&e.caseDetail.screen_info.length>0?a("el-col",[a("el-row",{attrs:{type:"flex"}},e._l(e.caseDetail.screen_info,function(t,l){return a("el-col",{key:l,attrs:{span:4}},[a("el-image",{staticStyle:{width:"95%"},attrs:{src:e.prefix+"/"+t.path,"preview-src-list":t.preview_src_list}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[e._v(e._s(t.name))]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(t.datetime))])])])],1)}),1)],1):a("el-col",[a("div",{staticStyle:{color:"#aaa","font-weight":"bold"}},[e._v("无截图")])])],1),a("el-collapse-item",{attrs:{title:"代码和堆栈",name:"code"}},[e.codeShow?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("h3",[e._v("代码")]),e._l(e.caseDetail.source.code,function(t,l){return a("div",{key:l},[e.caseDetail.failed_line_num===e.caseDetail.source.start+l?a("pre",{staticStyle:{color:"red"}},[e._v(e._s(t))]):a("pre",{attrs:{"data-lang":"Python"}},[a("code",[e._v(e._s(t))])])])})],2),a("el-col",{attrs:{span:12}},[a("h3",[e._v("错误堆栈")]),e.caseDetail.errors||e.caseDetail.failures?a("div",[a("pre",{staticStyle:{color:"red"}},[e._v(e._s(e.caseDetail.errors||e.caseDetail.failures))])]):e._e()])],1):e._e()],1),a("el-collapse-item",{attrs:{title:"运行日志",name:"log"}},[a("div",{staticClass:"log-box"},e._l(e.logs,function(t,l){return a("pre",{key:l,class:e.getLogClass(t)},[e._v(e._s(t))])}),0)]),a("el-collapse-item",{attrs:{title:"小程序日志",name:"weapp-log"}},[e.appLogs.length>0?a("div",{staticClass:"log-box"},e._l(e.appLogs,function(t,l){return a("pre",{key:l,class:e.getLogClass(JSON.stringify(t))},[e._v(e._s("["+t.type+"] - "+JSON.stringify(t.args)+"\n\n"))])}),0):a("div",[a("div",{staticStyle:{color:"#aaa","font-weight":"bold"}},[e._v("无日志")])])]),e.caseDetail.performance||e.caseDetail.fps?a("el-collapse-item",{attrs:{title:"性能信息",name:"performance"}},[e.caseDetail.performance?a("ve-line",{attrs:{toolbox:e.toolbox,data:e.perfData,settings:e.chartSettings}}):e._e(),e.caseDetail.fps?a("ve-line",{attrs:{grid:e.grid,toolbox:e.toolbox,data:e.fpsData,"mark-line":e.markLine}}):e._e()],1):e._e()],1)],1)}),m=[],h=(a("6762"),a("2fdb"),a("456d"),a("bc3a")),b=a("b9b9"),g={name:"CaseDetail",components:{VeLine:o.a},props:{caseDetail:Object},data:function(){return this.chartSettings={xAxisType:"time"},this.grid={right:"10%"},this.toolbox={feature:{magicType:{type:["line","bar"]},saveAsImage:{}}},this.markLine={data:[{name:"平均值",label:{formatter:"{b}: {c}"},type:"average"},{name:"最大值",label:{formatter:"{b}: {c}"},type:"max"},{name:"最小值",label:{formatter:"{b}: {c}"},type:"min"}]},{codeShow:!0,showLog:!1,logs:[],appLogs:[],perfData:{columns:["time","CPU","MEM"],rows:[]},fpsData:{columns:["second","帧数"],rows:[]}}},methods:{refresh:function(){var e=this,t={columns:["time","CPU","MEM"],rows:[]};if(this.caseDetail.performance){var a=!0,l=!1,s=void 0;try{for(var r,n=this.caseDetail.performance[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value,i=Object.keys(o)[0];t.rows.push({time:b(new Date(1e3*parseFloat(i)),"yyyy/mm/dd HH:MM:ss"),CPU:o[i].cpu,MEM:o[i].mem})}}catch(p){l=!0,s=p}finally{try{a||null==n.return||n.return()}finally{if(l)throw s}}}this.perfData=t;var c={columns:["second","帧数"],rows:[]};if(this.caseDetail.fps)for(var u in this.caseDetail.fps.fpsvalue)c.rows.push({second:u,"帧数":this.caseDetail.fps.fpsvalue[u]});this.fpsData=c,h.get("".concat(this.prefix,"/").concat(this.caseDetail.log_filename)).then(function(t){e.logs=t.data.split("\n")}).catch(function(e){console.log(e)}),h.get("".concat(this.prefix,"/").concat(this.caseDetail.weapp_log_path)).then(function(t){e.appLogs=t.data.split("\n");for(var a=0;a<e.appLogs.length;a++)""!==e.appLogs[a]?e.appLogs[a]=JSON.parse(e.appLogs[a]):e.appLogs.pop(a)}).catch(function(e){console.log(e)})},getLogClass:function(e){return console.log(e),e.includes("NATIV")||e.includes("DEBUG")||e.includes("METHO")||e.includes('"debug"')?"log-debug":e.includes("INFO")||e.includes('"log"')||e.includes('"info"')?"log-info":e.includes("WARN")||e.includes('"warn"')?"log-warning":"log-error"},statusMsg:function(e){return e.success?"成功":e.is_error?"异常":e.is_failure?"失败":void 0}},mounted:function(){this.refresh()},computed:{prefix:function(){return"".concat("").concat(this.caseDetail.relative)}},watch:{caseDetail:function(){this.refresh()}}},_=g,v=(a("c38a"),a("2877")),y=Object(v["a"])(_,f,m,!1,null,"60d82598",null),w=y.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.summary],stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"case_num",label:"case数"}}),a("el-table-column",{attrs:{prop:"success",label:"通过"}}),a("el-table-column",{attrs:{prop:"failed",label:"失败"}}),a("el-table-column",{attrs:{prop:"error",label:"case异常"}}),a("el-table-column",{attrs:{label:"通过率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":22,percentage:e.getPercentage(t.row),status:e.getPercentage(t.row)>90?"success":e.getPercentage(t.row)>60?"warning":"exception"}})]}}])}),a("el-table-column",{attrs:{prop:"start_time",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"costs",label:"耗时"}})],1)],1),a("el-row",{staticStyle:{height:"20px"}}),a("el-row",[e.summary.detail&&e.summary.detail.length>1?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.summary.detail,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"套件"}}),a("el-table-column",{attrs:{prop:"case_num",label:"case数"}}),a("el-table-column",{attrs:{prop:"success",label:"通过"}}),a("el-table-column",{attrs:{prop:"failed",label:"失败"}}),a("el-table-column",{attrs:{prop:"error",label:"case异常"}}),a("el-table-column",{attrs:{label:"通过率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":22,percentage:e.getPercentage(t.row),status:e.getPercentage(t.row)>90?"success":e.getPercentage(t.row)>60?"warning":"exception"}})]}}],null,!1,1260354110)}),a("el-table-column",{attrs:{prop:"start_time",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"costs",label:"耗时"}})],1):e._e()],1)],1)],1)},k=[],S={name:"Summary",props:{summary:Object},data:function(){return{}},methods:{getPercentage:function(e){var t=e.success,a=e.case_num;return parseInt(100*t/a)}}},x=S,O=Object(v["a"])(x,D,k,!1,null,null,null),C=O.exports,M=a("bc3a"),j={name:"app",components:{CaseDetail:w,Summary:C},data:function(){return{metadata:null,caseDetail:0,taskDetail:null,taskMenuShow:!1,defaultOpeneds:["0","0-0"]}},mounted:function(){var e=this;M.get("".concat("","meta.json")).then(function(t){function a(e){var t=e.screen_info,a=[],l=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(l=(n=o.next()).done);l=!0){var i=n.value;a.push(e.relative+"/"+i.path)}}catch(u){s=!0,r=u}finally{try{l||null==o.return||o.return()}finally{if(s)throw r}}e.preview_src_list=a;for(var c=0;c<t.length;c++)t[c].preview_src_list=a.slice(c).concat(a.slice(0,c))}switch(e.metadata=t.data,e.metadata.version||1){case 1:e.taskMenuShow=!1;var l=!0,s=!1,r=void 0;try{for(var n,o=e.metadata.case_datas[Symbol.iterator]();!(l=(n=o.next()).done);l=!0){var i=n.value;a(i)}}catch(w){s=!0,r=w}finally{try{l||null==o.return||o.return()}finally{if(s)throw r}}e.$refs.singleTable.setCurrentRow(e.caseDetail=e.metadata.case_datas[0]);break;case 2:e.metadata.task_datas.length<2?e.taskMenuShow=!1:e.taskMenuShow=!0;var c=!0,u=!1,p=void 0;try{for(var d,f=e.metadata.task_datas[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var m=d.value,h=!0,b=!1,g=void 0;try{for(var _,v=m.case_datas[Symbol.iterator]();!(h=(_=v.next()).done);h=!0){var y=_.value;a(y)}}catch(w){b=!0,g=w}finally{try{h||null==v.return||v.return()}finally{if(b)throw g}}}}catch(w){u=!0,p=w}finally{try{c||null==f.return||f.return()}finally{if(u)throw p}}e.taskDetail=e.metadata.task_datas[0],e.caseDetail=e.taskDetail&&e.taskDetail.case_datas[0];break}})},methods:{handleOpen:function(e,t){console.log("@open",e,t),this.taskDetail=this.taskDatas[e],this.caseDetail=this.taskDetail.case_datas[0],this.defaultOpeneds=[e,e+"-0"]},handleClose:function(e,t){console.log("@close",e,t)},handleSelect:function(e,t){var a=e.split("-"),l=Object(d["a"])(a,2),s=l[0],r=l[1];console.log("@select",e,t,s,r),this.taskDetail=this.taskDatas[s],this.caseDetail=this.taskDetail.case_datas[r]},tableRowClassName:function(e){var t=e.row;e.index;return t.success?"success-row":t.failure?"warning-row":"error-row"},tableRowClick:function(e){console.log(e),this.caseDetail=e},statusClass:function(e){return e.success?"success":e.is_error?"danger":e.is_failure?"warning":void 0},statusMsg:function(e){return e.success?"成功":e.is_error?"异常":e.is_failure?"失败":void 0}},computed:{taskDatas:function(){return this.metadata?this.metadata.task_datas:[]},caseDatas:function(){return this.metadata?1===this.metadata.version?this.metadata.case_datas:this.metadata.task_datas[0]&&this.metadata.task_datas[0].case_datas:[]},summary:function(){return this.metadata?1===this.metadata.version?this.metadata.summary:this.taskDetail?this.taskDetail.summary:this.metadata.task_datas[0]?this.metadata.task_datas[0].summary:{}:{}}}},P=j,L=(a("034f"),Object(v["a"])(P,u,p,!1,null,null,null)),T=L.exports;l["default"].config.productionTip=!1,l["default"].use(r.a),l["default"].component(o.a.name,o.a),l["default"].component(c.a.name,c.a),new l["default"]({render:function(e){return e(T)}}).$mount("#app")},"64a9":function(e,t,a){},a625:function(e,t,a){},c38a:function(e,t,a){"use strict";var l=a("a625"),s=a.n(l);s.a}});
//# sourceMappingURL=app.e0f3c7c8.js.map